import{_ as o,M as e,p as c,q as l,R as n,t as a,N as p,a1 as t}from"./framework-d81ad7e5.js";const r="/assets/tile-f9518b58.webp",u={},i=n("p",null,"###　加载GeoDatasource",-1),k={href:"https://juejin.cn/post/7263344807132545082",target:"_blank",rel:"noopener noreferrer"},m=t(`<div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>
        viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span>cesiumContainer<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 时间轴</span>
          <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 动画控件</span>
          <span class="token comment">// imageryProvider: esri,</span>
          <span class="token literal-property property">terrainProvider</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span><span class="token function">createWorldTerrain</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">requestVertexNormals</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//开启地形光照</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//  114.21948 , 36.42566 0 </span>


        <span class="token comment">//  加载 turf datasource 数据</span>
        <span class="token keyword">var</span> line <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">lineString</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token number">109.502991</span><span class="token punctuation">,</span> <span class="token number">29.68718</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token number">108.837829</span><span class="token punctuation">,</span> <span class="token number">32.969237</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token number">113.567871</span><span class="token punctuation">,</span> <span class="token number">37.200787</span><span class="token punctuation">]</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Cesium<span class="token punctuation">.</span>GeoJsonDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//  let alin = data.entities.values[0]</span>
        <span class="token comment">// viewer.entities.add(alin);</span>
        <span class="token comment">// viewer.zoomTo(alin)</span>
         viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> multiLine <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">multiLineString</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Cesium<span class="token punctuation">.</span>GeoJsonDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>multiLine<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        
        <span class="token punctuation">}</span><span class="token punctuation">)</span>




        <span class="token keyword">var</span> center <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> radius <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> bearing1 <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> bearing2 <span class="token operator">=</span> <span class="token number">47</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> arc <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">lineArc</span><span class="token punctuation">(</span>center<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> bearing1<span class="token punctuation">,</span> bearing2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> pm <span class="token operator">=</span> <span class="token keyword">await</span> Cesium<span class="token punctuation">.</span>GeoJsonDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>arc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pm<span class="token punctuation">)</span><span class="token punctuation">;</span>
        viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pm<span class="token punctuation">)</span>
        <span class="token comment">// viewer.zoomTo(pm)</span>

</code></pre></div><h3 id="加载topojson" tabindex="-1"><a class="header-anchor" href="#加载topojson" aria-hidden="true">#</a> 加载TopoJson</h3>`,2),d={href:"https://geojson.io/",target:"_blank",rel:"noopener noreferrer"},y=t(`<div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>
        <span class="token comment">// 加载 topojson 数据</span>
        <span class="token keyword">let</span> fileJson <span class="token operator">=</span> <span class="token keyword">await</span> Cesium<span class="token punctuation">.</span>GeoJsonDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&#39;/src/assets/fa.topojson&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fileJson<span class="token punctuation">)</span><span class="token punctuation">;</span>

        viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>fileJson<span class="token punctuation">)</span>


</code></pre></div><h3 id="加载-kmz-czml" tabindex="-1"><a class="header-anchor" href="#加载-kmz-czml" aria-hidden="true">#</a> 加载 KMZ CZML</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>
        <span class="token comment">//  114.21948 , 36.42566 0 </span>
        <span class="token keyword">let</span> gdp <span class="token operator">=</span> <span class="token keyword">await</span> Cesium<span class="token punctuation">.</span>KmlDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&#39;/src/assets/gdp2008.kmz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gdp<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> timedata <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>CzmlDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&#39;/src/assets/simple.czml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>timedata<span class="token punctuation">)</span>

</code></pre></div><h3 id="加载影像数据" tabindex="-1"><a class="header-anchor" href="#加载影像数据" aria-hidden="true">#</a> 加载影像数据</h3><h3 id="必应地图" tabindex="-1"><a class="header-anchor" href="#必应地图" aria-hidden="true">#</a> 必应地图</h3><p>cesium提供了<code>BingMapslmageryProvider</code>类来加载必应地图，但是当我们不做任何设置的时候（默认情况下），cesium加载的地图影像就是必应的。 当然，我们需要提前申请好cesium 的token。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>Cesium<span class="token punctuation">.</span>Ion<span class="token punctuation">.</span>defaultAccessToken <span class="token operator">=</span><span class="token string">&quot;输入你申请的的cesium的token&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示动画工具</span>
            <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示时间轴工具</span>
            <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示全屏按钮工具</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="天地图" tabindex="-1"><a class="header-anchor" href="#天地图" aria-hidden="true">#</a> 天地图</h3><p>天地图的地图服务采用<code>0GC Web Map Tile Service ( WMTS）</code>标准，使用之前需要先注册申请。</p><p>cesium提供了<code>WebMapTileServicelmageryProvider</code>类来调用天地图的地图服务。 代码如下：</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code> <span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>

<span class="token comment">//加载天地图影像图</span>
<span class="token literal-property property">imageryProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>WebMapTileServiceImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;天地图url&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">subdomains</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//服务负载子域</span>
        <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token string">&quot;tdtImgLayer&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">tileMatrixSetID</span><span class="token operator">:</span> <span class="token string">&quot;GoogleMapsCompatible&quot;</span><span class="token punctuation">,</span> <span class="token comment">//使用谷歌的瓦片切片方式</span>
        <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>WebMapTileServiceImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token comment">//天地图影像注记</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://t{s}.tianditu.com/cia_w/wmts&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">subdomains</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token string">&quot;tdtCiaLayer&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">tileMatrixSetID</span><span class="token operator">:</span> <span class="token string">&quot;GoogleMapsCompatible&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="arcgis地图" tabindex="-1"><a class="header-anchor" href="#arcgis地图" aria-hidden="true">#</a> ArcGis地图</h3><ul><li>Cesium提供了ArcGisMapServerlmageryProvider类来加载地图</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">baseLayerPicker</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//图层选择控件</span>
    <span class="token literal-property property">animation</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示动画工具</span>
    <span class="token literal-property property">timeline</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">//是否显示时间轴工具</span>
    <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">//是否显示全屏按钮工具</span>
    <span class="token comment">//加载ArcGIS在线影像图</span>
    <span class="token literal-property property">imageryProvider</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ArcGisMapServerImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="高德地图" tabindex="-1"><a class="header-anchor" href="#高德地图" aria-hidden="true">#</a> 高德地图</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">//加载高德地图，UrlTemplateImageryProvider接口是加载谷歌地图或者其他互联网地图的接口</span>
        <span class="token literal-property property">imageryProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>UrlTemplateImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://webst02.is.autonavi.com/appmaptile?style=6&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="地名-路网" tabindex="-1"><a class="header-anchor" href="#地名-路网" aria-hidden="true">#</a> 地名 路网</h3><ul><li>高德的影像，我们还可以添加高德其他的图层，路网，地名，地名+路网等等</li><li>但是需要<strong>重新创建imageryprovider</strong>来承接图层</li><li>并用<strong>addImageryProvider</strong>方法把图层添加到<code>viewer.imageryLayers</code>中去。</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">//加载高德地图，UrlTemplateImageryProvider接口是加载谷歌地图或者其他互联网地图的接口</span>
        <span class="token literal-property property">imageryProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>UrlTemplateImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://webst02.is.autonavi.com/appmaptile?style=6&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 地名 + 路网;</span>
viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>UrlTemplateImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://webst01.is.autonavi.com/appmaptile?style=8&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>高德地图相关url如下</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//（1）卫星影像 </span>
<span class="token string">&quot;http://webst01.is.autonavi.com/appmaptile?style=6&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span>  

<span class="token comment">//（2）路网</span>
<span class="token string">&quot;https://wprd01.is.autonavi.com/appmaptile?x={x}&amp;y={y}&amp;z={z}&amp;lang=zh_cn&amp;size=1&amp;scl=1&amp;style=8&amp;ltype=11&quot;</span>    

<span class="token comment">//（3）地名</span>
<span class="token string">&quot;https://wprd01.is.autonavi.com/appmaptile?x={x}&amp;y={y}&amp;z={z}&amp;lang=zh_cn&amp;size=1&amp;scl=1&amp;style=8&amp;ltype=4&quot;</span> 

<span class="token comment">//（4）地名+路网 </span>
<span class="token string">&quot;http://webst01.is.autonavi.com/appmaptile?style=8&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span><span class="token punctuation">,</span> 

<span class="token comment">//矢量切片风格 </span>
<span class="token string">&quot;http://webrd01.is.autonavi.com/appmaptile?&amp;scale=1&amp;lang=zh_cn&amp;style=8&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span>

</code></pre></div><h3 id="osm" tabindex="-1"><a class="header-anchor" href="#osm" aria-hidden="true">#</a> OSM</h3><p>Cesium提供了<code>OpenStreetMaplmageryProvider</code>类来加载OSM数据，只需直接指定OSM数据URL即可 当然，也可以用<code>UrlTemplateImageryProvider</code>，以XYZ的形式请求影像瓦片。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// 加载OSM影像</span>
        <span class="token literal-property property">imageryProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>OpenStreetMapImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://a.tile.openstreetmap.org/&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

        <span class="token comment">// XYZ形式</span>
        <span class="token comment">// imageryProvider: new Cesium.UrlTemplateImageryProvider({</span>
        <span class="token comment">// 	url: &quot;http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,</span>
        <span class="token comment">// 	subdomains: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;],</span>
        <span class="token comment">// }),</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ogc地图服务" tabindex="-1"><a class="header-anchor" href="#ogc地图服务" aria-hidden="true">#</a> OGC地图服务</h2><ul><li>0GC全称为<code>0pen Geospatial Consortium</code>，开放地理空间信息联盟，这个组织制定了GIS数据的规范、标准。</li></ul><h3 id="wms" tabindex="-1"><a class="header-anchor" href="#wms" aria-hidden="true">#</a> WMS</h3><ul><li>WMS，即网络地图服务<code>（Web Map Service)</code>，用户向接口请求，即可返回地图。</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">baseLayerPicker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//图层选择控件</span>
        <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示动画工具</span>
        <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示时间轴工具</span>
        <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示全屏按钮工具</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//加载WMS</span>
<span class="token keyword">var</span> wmsImageryProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>WebMapServiceImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8086/geoserver/cesium/wms&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 服务地址</span>
        <span class="token literal-property property">layers</span><span class="token operator">:</span> <span class="token string">&quot;cesium:dida&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 图层名称</span>
        <span class="token literal-property property">parameters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否透明</span>
                <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 返回格式</span>
                <span class="token literal-property property">srs</span><span class="token operator">:</span> <span class="token string">&quot;EPSG:4326&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 坐标系</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>wmsImageryProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre></div><h3 id="wmts" tabindex="-1"><a class="header-anchor" href="#wmts" aria-hidden="true">#</a> WMTS</h3><ul><li>Web地图瓦片服务<code>（Web Map Tile Server，WMTS）</code>提供了一种采用预定义图块方法发布数字地图服务的标准化解决方案，并且弥补了WMS不能提供分块地图的不足。</li></ul><ul><li>简单来说，就是把一整张地图切成小块，用金字塔的形式组织起来，地图越放大，展示的块数就越多。</li></ul><p><img src="`+r+`" alt="tileImage"></p><ul><li><strong>Cesium提供了WebMapTileServiceImageryProvider</strong>类来加载</li></ul><p>GeoServer发布的WMTS切片影像</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> wmtsImageryProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>WebMapTileServiceImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;http://localhost:8088/geoserver/gwc/service/wmts/rest/Cesium:dida/{style}/{TileMatrixSet}/{TileMatrixSet}:{TileMatrix}/{TileRow}/{TileCol}?format=image/png&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token string">&#39;Cesium:dida&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;image/png&#39;</span><span class="token punctuation">,</span>  <span class="token comment">//不能用jpeg格式，因为jpeg格式不能设置透明背景，设置透明背景会变成白色</span>
    <span class="token literal-property property">tileMatrixSetID</span><span class="token operator">:</span> <span class="token string">&#39;EPSG:900913&#39;</span><span class="token punctuation">,</span>      <span class="token comment">//一般使用EPSG:3857坐标系</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>wmtsImageryProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="tms" tabindex="-1"><a class="header-anchor" href="#tms" aria-hidden="true">#</a> TMS</h3><ul><li>Cesium提供了<strong>UrlTemplateImageryProvider</strong>类，用于通过指定的</li></ul><p>URL来加载TMS。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> urlTemplateImageryProvider <span class="token operator">=</span>

<span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>UrlTemplateImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span> <span class="token operator">:</span> <span class="token string">&quot;http://localhost:8088/geoserver/gwc/service/tms/1.0.0/Cesium%3Adida@EPSG%3A900913@png/{z}/{x}/{reverseY}.png&quot;</span>
    <span class="token literal-property property">layers</span><span class="token operator">:</span> <span class="token string">&quot;cesium:dida&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">parameters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">srs</span><span class="token operator">:</span> <span class="token string">&quot;EPSG:4326&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;application/openlayers&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token comment">//指定文件拓展名为png</span>
        <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="加载geojson数据" tabindex="-1"><a class="header-anchor" href="#加载geojson数据" aria-hidden="true">#</a> 加载GeoJSON数据</h3><ul><li>GeoJSON 是一种使用 JSON 来编码各种地理数据结构的格式，是一种轻量级的数据交换格式，可以用来表示几何对象、属性数据、空间参考系统等信息。</li><li>cesium加载GeoJSON，要用到GeoJsonDataSource类，可以通过load方法加载GeoJSON 对象，并设置相应的填充颜色、边框颜色、边框宽度、是否贴地等属性。</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> GeoJsonData <span class="token operator">=</span> viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
        Cesium<span class="token punctuation">.</span>GeoJsonDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;./矢量文件/json/merge.json&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">fill</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">PINK</span><span class="token punctuation">,</span> <span class="token comment">//填充色</span>
                <span class="token literal-property property">stroke</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">HOTPINK</span><span class="token punctuation">,</span> <span class="token comment">//轮廓颜色</span>
                <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//轮廓宽度</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
GeoJsonData<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>GeoJsonData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="加载kml数据" tabindex="-1"><a class="header-anchor" href="#加载kml数据" aria-hidden="true">#</a> 加载KML数据</h3><ul><li>Cesium提供了KmlDataSource类来处理KML数据，可以通过load方法加载KML数据</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示动画工具</span>
    <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">//是否显示时间轴工具</span>
    <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">//是否显示全屏按钮工具</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> kmlData <span class="token operator">=</span> viewer<span class="token punctuation">.</span>dataSources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>KmlDataSource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>
    <span class="token string">&#39;./矢量文件/kml/road.kml&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">camera</span><span class="token operator">:</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>camera<span class="token punctuation">,</span>
        <span class="token literal-property property">canvas</span><span class="token operator">:</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>canvas<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

kmlData<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>kmlData<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="tiff数据" tabindex="-1"><a class="header-anchor" href="#tiff数据" aria-hidden="true">#</a> TIFF数据</h3><ul><li>Cesium并不能直接加载本地TIFF格式的影像数据，而是需要对其进行切片处理后才能加载，我们可以采用【北京西部世界】公司研发的cesiumLab软件，来进行数据切片操作。</li><li>我们直接使用影像切片功能，导入tiff文件，设置 “储存类型”为“散列文件”，并设置好输出路径，即可开始运行。</li></ul><h5 id="关键点-使用urltemplateimageryprovider类指定瓦片文件路径并通过xyz方式加载瓦片数据-瓦片文件路径后加-z-x-y-png" tabindex="-1"><a class="header-anchor" href="#关键点-使用urltemplateimageryprovider类指定瓦片文件路径并通过xyz方式加载瓦片数据-瓦片文件路径后加-z-x-y-png" aria-hidden="true">#</a> 关键点，使用UrlTemplateImageryProvider类指定瓦片文件路径并通过xyz方式加载瓦片数据<code>（瓦片文件路径后加/{z}/{x}/{y}.png）</code></h5><h3 id="加载点云数据" tabindex="-1"><a class="header-anchor" href="#加载点云数据" aria-hidden="true">#</a> 加载点云数据</h3><ul><li><p>点云数据<code>（Point Cloud Data）</code>是指在一个三维坐标系统中的一组向量的集合。扫描资料以点的形式被记录，每一个点都包含三维坐标，有些可能包含颜色信息（RGB）或反射强度 信息（Intensity）。</p></li><li><p>点云就是一堆点，组合在一起，有一个形状 这里以LAS格式的点云数据为例介绍Cesium加载点云数据的过程。 我们还是要借助cesiumlab这个数据处理软件： 使用点云切片功能，加载las数据，进行切片</p></li><li><p>首先创建一个Cesium3D切片集，并指定点云切片数据的 JSON文件路径URL，然后将其添加至场景primitives中。</p></li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> tileset <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cesium3DTileset</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;./RasterImage/点云切片数据/tileset.json&quot;</span><span class="token punctuation">,</span> <span class="token comment">//文件的路径</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>tileset<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//定位过去</span>

</code></pre></div><h2 id="加载地形数据" tabindex="-1"><a class="header-anchor" href="#加载地形数据" aria-hidden="true">#</a> 加载地形数据</h2><h3 id="加载在线的地形数据" tabindex="-1"><a class="header-anchor" href="#加载在线的地形数据" aria-hidden="true">#</a> 加载在线的地形数据</h3><p>使用 <code>terrainProvider: Cesium.createWorldTerrain()</code></p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">terrainProvider</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span><span class="token function">createWorldTerrain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//加载在线地形数据</span>
        <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示动画工具</span>
        <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示时间轴工具</span>
        <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示全屏按钮工具</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>kmlData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="加载本地的地形数据" tabindex="-1"><a class="header-anchor" href="#加载本地的地形数据" aria-hidden="true">#</a> 加载本地的地形数据</h3><p>大部分地形原始数据都是TIFF格式的，而Cesium支持的是TERRAIN，可以用cesiumlab。格式的数据，因此需要先处理数据。 获取地形数据可以到<a href="www.gscloud.cn">地理空间数据云网站</a>下载 在高级检索中找到DEM，选择一块下载即可</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">//加载本地地形切片</span>
    <span class="token literal-property property">terrainProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CesiumTerrainProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8082&quot;</span><span class="token punctuation">,</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示动画工具</span>
    <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示时间轴工具</span>
    <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示全屏按钮工具</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="加载倾斜摄影模型数据" tabindex="-1"><a class="header-anchor" href="#加载倾斜摄影模型数据" aria-hidden="true">#</a> 加载倾斜摄影模型数据</h2><ul><li>常见的倾斜摄影三维模型一般是OSGB格式，二进制存储，并且配备一个metadata.xml文件（类似于配置文件）,cesium无法直接加载OSGB，需要先将数据转换为3Dtiles格式，这种数据格式是cesium团队打造的，可以被cesium很好地加载。</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> tileset <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cesium3DTileset</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;./倾斜摄影/大雁塔3DTiles/tileset.json&#39;</span><span class="token punctuation">,</span><span class="token comment">//文件的路径</span>
        <span class="token literal-property property">maximumScreenSpaceError</span><span class="token operator">:</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定位过去</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>tileset<span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre></div><h3 id="加载gltf数据" tabindex="-1"><a class="header-anchor" href="#加载gltf数据" aria-hidden="true">#</a> 加载glTF数据</h3><ul><li>glTF<code>（GL Transmission Format）</code>，图形语言交换格式，是一种3D内容的格式标准， 其本质是一个JSON文件。简单来说就是一种3D模型的文件格式（粗浅理解）</li></ul><p>用 <strong>Model.fromGltf</strong> 接口指定glTF数据URL来进行glTF数据加载，并可以设置相关的配置项，例如</p><p><strong>modelMatrix</strong>调整glTF数据的加载位置，</p><p><strong>scale</strong>可以调整缩放比例等。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> origin <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">114.39278</span><span class="token punctuation">,</span> <span class="token number">30.52357</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//</span>
<span class="token keyword">var</span> modelMatrix <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Transforms<span class="token punctuation">.</span><span class="token function">eastNorthUpToFixedFrame</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> model <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Model<span class="token punctuation">.</span><span class="token function">fromGltf</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;./3D格式数据/glTF/CesiumMilkTruck.gltf&#39;</span><span class="token punctuation">,</span>

    <span class="token literal-property property">modelMatrix</span> <span class="token operator">:</span> modelMatrix<span class="token punctuation">,</span>  <span class="token comment">//Gltf数据加载位置</span>

    <span class="token literal-property property">scale</span> <span class="token operator">:</span> <span class="token number">5</span>     <span class="token comment">//放大倍数</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//移动相机</span>

viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">flyTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  

  <span class="token literal-property property">destination</span> <span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">114.39278</span><span class="token punctuation">,</span> <span class="token number">30.52357</span><span class="token punctuation">,</span> <span class="token number">60.0</span><span class="token punctuation">)</span>     <span class="token comment">//相机飞入点</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="加载czml数据" tabindex="-1"><a class="header-anchor" href="#加载czml数据" aria-hidden="true">#</a> 加载CZML数据</h3><p>czml数据时cesium团队打造的，本质上还是JSON数据，但是其功能更加强大，除了可以绘制图形、加载模型，还<strong>加入了时间属性，从而能让物体跟随时间变化，动起来</strong>。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//初始化，要记得开启时间线 和 动画</span>
<span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//开启时间线</span>
        <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//开启动画</span>
        <span class="token literal-property property">vrButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">sceneModePicker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">infoBox</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">scene3DOnly</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> czml <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;document&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;CZML Model&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;aircraft model&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Cesium Air&quot;</span><span class="token punctuation">,</span>

        <span class="token comment">// 物体在什么时间范围可用</span>
        <span class="token literal-property property">availability</span><span class="token operator">:</span> <span class="token string">&quot;2012-08-04T16:00:00Z/2012-08-04T16:05:00Z&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 设置物体的起始时间</span>
                <span class="token literal-property property">epoch</span><span class="token operator">:</span> <span class="token string">&quot;2012-08-04T16:00:00Z&quot;</span><span class="token punctuation">,</span>
                <span class="token comment">// 坐标数据，4个为一组，1时间，2经度，3纬度，4高度</span>
                <span class="token literal-property property">cartographicDegrees</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">150000</span><span class="token punctuation">,</span> 
                        <span class="token number">100</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">150000</span><span class="token punctuation">,</span> 
                        <span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">150000</span><span class="token punctuation">,</span> 
                        <span class="token number">300</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">150000</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">model</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">gltf</span><span class="token operator">:</span> <span class="token string">&quot;./3D格式数据/glb/Cesium_Air.glb&quot;</span><span class="token punctuation">,</span> <span class="token comment">//模型路径URL</span>
                <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">20000.0</span><span class="token punctuation">,</span> <span class="token comment">//缩放比例</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>


</code></pre></div><ul><li>CZML至少要包含两个对象，每一个对象都是一个CZML的数据包。</li></ul><ul><li>第一个对象， <ul><li>id一般都写document,</li><li>name属性值可以自定义，</li><li>version可以CZML版本号，暂时只有1.0。</li></ul></li><li>第二个对象是关于场景内的几何模型数据。 <ul><li>id是每一个几何模型对象都有的，id属性用于标识，如果id没有指定，cesium会自动生成一个，但是在后续开发中我们无法对其进行引用，如添加数据等，所以id我们要提前设定好，且在CZML中是唯一的。</li><li>name属性可以自定义名称。</li><li>availability设定了数据的时间范围， 物体在什么时间范围可用</li><li>position用来设置模型的位置，epoch设置了起始时间，<strong>cartographicDegrees设置了4个不同时间点的位置，从起始时间开始，第0秒的时候模型在第一个位置，第100秒的时候模型在第二个位置</strong>，以此类推。</li></ul></li></ul><h3 id="加载单张图片" tabindex="-1"><a class="header-anchor" href="#加载单张图片" aria-hidden="true">#</a> 加载单张图片</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>
<span class="token comment">//左下角坐标，右上角坐标</span>
<span class="token keyword">var</span> rectangle<span class="token operator">=</span>Cesium<span class="token punctuation">.</span>Rectangle<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">114.38004</span><span class="token punctuation">,</span><span class="token number">30.51667</span><span class="token punctuation">,</span><span class="token number">114.40471</span><span class="token punctuation">,</span><span class="token number">30.53045</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SingleTileImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;./RasterImage/图片/single.jpg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">rectangle</span><span class="token operator">:</span> rectangle
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">setView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">destination</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Rectangle<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">114.38304</span><span class="token punctuation">,</span><span class="token number">30.51667</span><span class="token punctuation">,</span><span class="token number">114.40471</span><span class="token punctuation">,</span><span class="token number">30.52345</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ol><li>首先创建了一个矩形范围<code>（rectangle）</code>对象，用于指定图像或地理实体在地球上的显示范围。通过  <code>Cesium.Rectangle.fromDegrees()</code>  方法，提供了四个经度和纬度值，分别表示矩形的西、南、东、北边界。</li><li>通过<code>new Cesium.SingleTileImageryProvider</code> 加载单张图片，并且设定好显示范围，</li><li>最后设置相机的初始显示范围</li></ol>`,76);function g(v,h){const s=e("ExternalLinkIcon");return c(),l("div",null,[i,n("ul",null,[n("li",null,[n("a",k,[a("参考记录"),p(s)])])]),m,n("ul",null,[n("li",null,[n("a",d,[a("在线绘制"),p(s)])])]),y])}const f=o(u,[["render",g],["__file","load_datasource.html.vue"]]);export{f as default};
