import{_ as s,p as a,q as n,a1 as p}from"./framework-d81ad7e5.js";const e={},o=p(`<ul><li>EXP和IMP是客户端工具程序，它们既可以在客户端使用，也可以在服务端使用。</li></ul><ul><li>EXPDP和IMPDP是服务端的工具程序，他们只能在ORACLE服务端使用，不能在客户端使用。</li><li><strong>IMP只适用于EXP导出的文件</strong>，不适用于EXPDP导出文件；<strong>IMPDP只适用于EXPDP</strong>导出的文件，而不适用于EXP导出文件。</li></ul><h2 id="使用expdp导出文件前的设置" tabindex="-1"><a class="header-anchor" href="#使用expdp导出文件前的设置" aria-hidden="true">#</a> 使用expdp导出文件前的设置：</h2><ol><li>创建逻辑目录，该命令不会在操作系统创建真正的目录，最好以system等管理员创建（我登录的是root用户），选取linux上一个实际目录，或者新建一个目录，这里我选的是&#39;<code>/usr/local/tomcat</code>&#39;这个已经有的目录，并将tomcat文件夹权限设为最高777，</li></ol><p>进入oracle模式：su - oracle</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@iz2zehftd4ce4m2zqo3c6iz ~<span class="token punctuation">]</span>$ sqlplus / as sysdba

SQL<span class="token operator">&gt;</span>create directory dmp_dir as <span class="token string">&#39;/usr/local/tomcat&#39;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>查看管理理员目录（同时查看操作系统是否存在，因为Oracle并不关心该目录是否存在，如果不存在，则出错）</li></ol><p><code>SQL&gt;select * from dba_directories;</code></p><ol start="3"><li>给用户赋予在指定目录的操作权限，最好以system等管理员赋予（我这里登录的是root用户，所以设置为public）。</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span><span class="token keyword">grant</span> <span class="token keyword">read</span><span class="token punctuation">,</span><span class="token keyword">write</span> <span class="token keyword">on</span> directory dmp_dir <span class="token keyword">to</span> <span class="token keyword">public</span><span class="token punctuation">;</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> host

<span class="token comment">-- 备注：删除目录语句：SQL&gt; DROP DIRECTORY dmp_dir;</span>
</code></pre></div><h3 id="导出数据" tabindex="-1"><a class="header-anchor" href="#导出数据" aria-hidden="true">#</a> 导出数据</h3><ul><li><strong>退出sql模式到oracle</strong></li></ul><ol><li>按用户导出数据</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ expdp 用户名/密码@服务器IP地址/orcl <span class="token assign-left variable">schemas</span><span class="token operator">=</span>用户名 <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dmp_dir <span class="token assign-left variable">DUMPFILE</span><span class="token operator">=</span><span class="token number">20190603</span>.dmp <span class="token assign-left variable">logfile</span><span class="token operator">=</span>20190603dmp.log<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>按表名导</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ expdp test_demo/test_demo@orcl <span class="token assign-left variable">TABLES</span><span class="token operator">=</span>sys_log,dept <span class="token assign-left variable">dumpfile</span><span class="token operator">=</span>sys_log.dmp <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dmp_dir<span class="token punctuation">;</span>
</code></pre></div><p>按指定一类的表名进行导出，比如导出表名前缀为test_的所有表：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ expdp test_demo/test_demo@orcl <span class="token assign-left variable">TABLES</span><span class="token operator">=</span>test_% <span class="token assign-left variable">dumpfile</span><span class="token operator">=</span>sys_log.dmp <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dmp_dir<span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>按查询条件导</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ expdp test_demo/test_demo@orcl <span class="token assign-left variable">directory</span><span class="token operator">=</span>dmp_dir <span class="token assign-left variable">dumpfile</span><span class="token operator">=</span>sys_log1.dmp <span class="token assign-left variable">Tables</span><span class="token operator">=</span>sys_log <span class="token assign-left variable">query</span><span class="token operator">=</span><span class="token punctuation">\\</span>&quot;WHERE <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token punctuation">\\</span>&#39;5280e<span class="token punctuation">\\</span>&#39;<span class="token punctuation">\\</span>&quot;<span class="token punctuation">;</span>
</code></pre></div><h3 id="导入数据" tabindex="-1"><a class="header-anchor" href="#导入数据" aria-hidden="true">#</a> 导入数据</h3><ol><li>导到指定用户下</li></ol><p>如果想导入的用户已经存在，并且导入用户名和导出的用户名不一致:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ impdp user2/pass2 <span class="token assign-left variable">directory</span><span class="token operator">=</span>dmp_dir <span class="token assign-left variable">dumpfile</span><span class="token operator">=</span>TestDemo.dmp <span class="token assign-left variable">REMAP_SCHEMA</span><span class="token operator">=</span>user1:user2  <span class="token assign-left variable">remap_tablespace</span><span class="token operator">=</span>user1space:user2space  <span class="token assign-left variable">EXCLUDE</span><span class="token operator">=</span><span class="token environment constant">USER</span>
</code></pre></div><p>如果想导入的用户不存在:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span><span class="token variable">$impdp</span> system/passsystem <span class="token assign-left variable">directory</span><span class="token operator">=</span>dmp_dir <span class="token assign-left variable">dumpfile</span><span class="token operator">=</span>user1.dmp <span class="token assign-left variable">REMAP_SCHEMA</span><span class="token operator">=</span>user1:user2
</code></pre></div><p>user2会自动建立，其权限和使用的表空间与user1相同，但此时用user2无法登录，必须修改user2的密码</p><p>如果想导入的用户已经存在，并且导入用户名和导出的用户名一致:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ impdp test_demo/test_demo <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dmp_dir <span class="token assign-left variable">DUMPFILE</span><span class="token operator">=</span>expdp.dmp <span class="token assign-left variable">SCHEMAS</span><span class="token operator">=</span>test_demo<span class="token punctuation">;</span>

impdp username/password <span class="token assign-left variable">table_exists_action</span><span class="token operator">=</span>truncate  <span class="token assign-left variable">directory</span><span class="token operator">=</span>DATA_PUMP_DIR <span class="token assign-left variable">dumpfile</span><span class="token operator">=</span>expdpfilename.dmp <span class="token assign-left variable">logfile</span><span class="token operator">=</span>implog.log
</code></pre></div><p>如果需要覆盖或追加数据，则需要添加table_exists_action命令：</p><p>例如，导入到指定用户下，并覆盖原有表数据：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ impdp user2/pass2 <span class="token assign-left variable">table_exists_action</span><span class="token operator">=</span>replace <span class="token assign-left variable">directory</span><span class="token operator">=</span>dmp_dir <span class="token assign-left variable">dumpfile</span><span class="token operator">=</span>TestDemo.dmp <span class="token assign-left variable">REMAP_SCHEMA</span><span class="token operator">=</span>user1:user2 <span class="token assign-left variable">EXCLUDE</span><span class="token operator">=</span><span class="token environment constant">USER</span>
</code></pre></div><p>table_exists_action含义：</p><p>skip 是如果已存在表，则跳过并处理下一个对象；</p><p>append是为表增加数据;</p><p>truncate是截断表，然后为其增加新数据；</p><p>replace是删除已存在表，重新建表并追加数据;</p><ol start="2"><li>改变表的owner</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ impdp system/manager <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dpdata1 <span class="token assign-left variable">DUMPFILE</span><span class="token operator">=</span>expdp.dmp <span class="token assign-left variable">TABLES</span><span class="token operator">=</span>scott.dept <span class="token assign-left variable">REMAP_SCHEMA</span><span class="token operator">=</span>scott:system<span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>导入表空间</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ impdp system/manager <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dpdata1 <span class="token assign-left variable">DUMPFILE</span><span class="token operator">=</span>tablespace.dmp <span class="token assign-left variable">TABLESPACES</span><span class="token operator">=</span>example<span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>导入数据库</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ impdb system/manager <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dump_dir <span class="token assign-left variable">DUMPFILE</span><span class="token operator">=</span>full.dmp <span class="token assign-left variable">FULL</span><span class="token operator">=</span>y<span class="token punctuation">;</span>
</code></pre></div><ol start="5"><li>追加数据</li></ol><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@hzqq ~<span class="token punctuation">]</span>$ impdp system/manager <span class="token assign-left variable">DIRECTORY</span><span class="token operator">=</span>dpdata1 <span class="token assign-left variable">DUMPFILE</span><span class="token operator">=</span>expdp.dmp <span class="token assign-left variable">SCHEMAS</span><span class="token operator">=</span>system TABLE_EXISTS_ACTION
</code></pre></div><p>表导入完成后，登录plsql等工具，检查下function、view这些是否有报错，有报错的查找下代码原因，也可能是因为导入的原因需要重新编辑并运行下即可：</p><h3 id="备注" tabindex="-1"><a class="header-anchor" href="#备注" aria-hidden="true">#</a> 备注</h3><ul><li><p>密码有特殊字符的加上引号：<strong>username/&quot;psdf$@FS&quot;</strong></p></li><li><p>如果要导入的数据库没有表空间，则在impdp语句后加上参数：TRANSFORM=segment_attributes:n</p></li><li><p>例如：<code> impdp test_demo/test_demo DIRECTORY=dmp_dir DUMPFILE=expdp.dmp SCHEMAS=test_demo TRANSFORM=segment_attributes:n</code></p></li></ul><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token comment">--导出</span>
<span class="token comment">--查看导出目录</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dba_directories<span class="token punctuation">;</span>
<span class="token comment">--expnc_dir 为导出库存放位置,没有需创建</span>
<span class="token comment">--创建目录</span>
<span class="token keyword">create</span> directory expnc_dir <span class="token keyword">as</span> <span class="token string">&#39;D:\\app\\Administrator\\admin\\xactqc619\\dpdump&#39;</span><span class="token punctuation">;</span>
<span class="token comment">--授权</span>
<span class="token keyword">Grant</span> <span class="token keyword">read</span><span class="token punctuation">,</span><span class="token keyword">write</span> <span class="token keyword">on</span> directory expnc_dir <span class="token keyword">to</span> system<span class="token punctuation">;</span>
<span class="token comment">--导出整个库</span>
expdp system<span class="token operator">/</span>cape<span class="token variable">@ORCL</span> DIRECTORY<span class="token operator">=</span>expnc_dir <span class="token keyword">DUMPFILE</span><span class="token operator">=</span><span class="token number">20181006</span>jswj<span class="token punctuation">.</span>EXPDB <span class="token keyword">FULL</span><span class="token operator">=</span>y<span class="token punctuation">;</span>

<span class="token comment">--导入</span>
<span class="token comment">--导入测试数据库</span>
<span class="token comment">--connect sys/password as sysdba</span>
<span class="token comment">--当首次导入时创建表空间 （运行脚本时会提示输入 &amp;1 输入数据文件希望存放的物理地址 例如 D:\\OracleData）</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> apps datafile <span class="token string">&#39;&amp;1\\apps.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> appsys datafile <span class="token string">&#39;&amp;1\\appsys.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> hr datafile <span class="token string">&#39;&amp;1\\hr.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> appview datafile <span class="token string">&#39;&amp;1\\appview.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> workflow datafile <span class="token string">&#39;&amp;1\\workflow.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> fm datafile <span class="token string">&#39;&amp;1\\fm.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> bbp datafile <span class="token string">&#39;&amp;1\\bbp.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> oa datafile <span class="token string">&#39;&amp;1\\oa.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> km datafile <span class="token string">&#39;&amp;1\\km.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> v6fm datafile <span class="token string">&#39;&amp;1\\km.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>

<span class="token comment">--创建用户</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> apps identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> apps<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> appsys identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> appsys<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> hr identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> hr<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> workflow identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> workflow<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> fm identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> fm<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> bbp identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> bbp<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> oa identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> oa<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> km identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> km<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> v6fm identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> v6fm<span class="token punctuation">;</span>


<span class="token comment">--赋权限</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> apps<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> appsys<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> hr<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> workflow<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> fm<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> bbp<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> oa<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> km<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> v6fm<span class="token punctuation">;</span>

<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> appsys <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> apps <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> hr <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> workflow <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> fm <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> bbp <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> oa <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> km <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> v6fm <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>	

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dba_directories<span class="token punctuation">;</span>
<span class="token comment">--expnc_dir 为导入库存放位置，没有需创建</span>

<span class="token comment">--创建目录</span>
<span class="token keyword">create</span> directory expncs <span class="token keyword">as</span> <span class="token string">&#39;D:\\app\\Administrator\\admin\\xactqc619\\dpdump&#39;</span><span class="token punctuation">;</span>
<span class="token comment">--授权</span>
<span class="token keyword">Grant</span> <span class="token keyword">read</span><span class="token punctuation">,</span><span class="token keyword">write</span> <span class="token keyword">on</span> directory expncs <span class="token keyword">to</span> system<span class="token punctuation">;</span>
<span class="token comment">--导入</span>
impdp system<span class="token operator">/</span>cape<span class="token variable">@orcl</span> DIRECTORY<span class="token operator">=</span>EXPNC_DIR <span class="token keyword">DUMPFILE</span><span class="token operator">=</span><span class="token number">20190730</span>JSWJ<span class="token punctuation">.</span>EXPDB <span class="token keyword">FULL</span><span class="token operator">=</span>y <span class="token keyword">ignore</span><span class="token operator">=</span>y<span class="token punctuation">;</span>



<span class="token keyword">create</span> directory data_dir <span class="token keyword">as</span> <span class="token string">&#39;D:/11&#39;</span><span class="token punctuation">;</span> 
impdp mms<span class="token operator">/</span>cape<span class="token variable">@orcl</span> REMAP_SCHEMA <span class="token operator">=</span> bill:bill table_exists_action <span class="token operator">=</span> <span class="token keyword">replace</span> directory<span class="token operator">=</span>data_dir <span class="token keyword">dumpfile</span><span class="token operator">=</span><span class="token number">20190730</span>JSWJ<span class="token punctuation">.</span>EXPDB logfile<span class="token operator">=</span>expdp<span class="token punctuation">.</span>log







<span class="token comment">--表空间mms</span>
<span class="token keyword">create</span> <span class="token keyword">tablespace</span> mms datafile <span class="token string">&#39;D:\\app\\user\\oradata\\orcl\\mms.dbf&#39;</span> size <span class="token number">100</span>m autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<span class="token comment">--用户mms</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> mms identified <span class="token keyword">by</span> cape <span class="token keyword">default</span> <span class="token keyword">tablespace</span> mms<span class="token punctuation">;</span>
<span class="token comment">--开发库赋权</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> mms<span class="token punctuation">;</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> dual <span class="token keyword">to</span> mms <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>




<span class="token comment">--导出脚本</span>
expdp system<span class="token operator">/</span>cape<span class="token variable">@sac182</span> <span class="token keyword">dumpfile</span><span class="token operator">=</span>mms<span class="token punctuation">.</span>EXPDB schemas<span class="token operator">=</span><span class="token punctuation">(</span>mms<span class="token punctuation">)</span>




<span class="token comment">--导入脚本</span>

impdp system<span class="token operator">/</span>cape<span class="token variable">@SMS114</span> <span class="token keyword">dumpfile</span><span class="token operator">=</span>APS_V6_AEPCS63<span class="token punctuation">.</span>EXPDB schemas<span class="token operator">=</span><span class="token punctuation">(</span>aps<span class="token punctuation">)</span> EXCLUDE<span class="token operator">=</span><span class="token keyword">STATISTICS</span>


impdp system<span class="token operator">/</span>admin<span class="token variable">@SMS114</span> directory<span class="token operator">=</span>DATA_PUMP_DIR <span class="token keyword">dumpfile</span><span class="token operator">=</span>APS_V6_AEPCS63<span class="token punctuation">.</span>EXPDB REMAP_SCHEMA<span class="token operator">=</span>aps:apsss  
remap_tablespace<span class="token operator">=</span>EXAMPLE:apss



</code></pre></div><h2 id="expdp-impdp命令解析" tabindex="-1"><a class="header-anchor" href="#expdp-impdp命令解析" aria-hidden="true">#</a> expdp/impdp命令解析</h2><p>使用模板：<strong><code>expdp user/password@ip:1521/sid DIRECTORY=DATA_PUMP_DIR DUMPFILE=test.dump CONTENT=ALL schema=user</code></strong></p><ul><li><strong>directory</strong>： 该参数可自定义，定义方法为：<strong>create directory dir_dp as &#39;/opt/oracle/admin/XE/dpdump/&#39;</strong>，</li></ul><ul><li><p>一般来说是使用数据库默认的数据泵导出路径，可以用SQ语句查看系统默认的导出路径： <strong>SELECT * FROM all_directories</strong> 该路径的默认名为DATA_PUMP_DIR。</p></li><li><p><strong>DUMPFILE：</strong> 导出的数据泵文件名字，为自定义，一般用.dump后缀结尾。</p></li><li><p><strong>CONTENT：</strong></p></li></ul><ul><li>该参数为导出模式，其有三个选项：<strong>{ALL | DATA_ONLY | METADATA_ONLY}</strong></li></ul><ul><li><p>ALL为导出整个数据库</p></li><li><p>DATA_ONLY为仅导出数据</p></li><li><p>METADATA_ONLY为仅导出元数据</p></li><li><p><strong>schema：</strong> 该参数指定用哪个用户来导出数据。如果是用非管理员 **(sys/system)**账户导数据，需要给你该用户授予访问directory目录的权限</p></li><li><p><strong>Grant read,write on directory dir_dp to user</strong>。</p></li></ul><h3 id="impdp-导入命令" tabindex="-1"><a class="header-anchor" href="#impdp-导入命令" aria-hidden="true">#</a> impdp，导入命令</h3><p>使用模板： <strong><code>impdp user/password@sid DIRECTORY=DATA_PUMP_DIR DUMPFILE=test.dump CONTENT=ALL schema=user</code></strong></p><p>参数和expdp命令是一样的。</p>`,58),t=[o];function l(c,r){return a(),n("div",null,t)}const d=s(e,[["render",l],["__file","impdp.html.vue"]]);export{d as default};
