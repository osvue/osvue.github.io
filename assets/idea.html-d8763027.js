import{_ as n,p as s,q as a,a1 as t}from"./framework-d81ad7e5.js";const p={},o=t(`<h1 id="idea-生成entity" tabindex="-1"><a class="header-anchor" href="#idea-生成entity" aria-hidden="true">#</a> IDEA 生成entity</h1><h2 id="for-spring-data-jpa" tabindex="-1"><a class="header-anchor" href="#for-spring-data-jpa" aria-hidden="true">#</a> for spring data jpa</h2><div class="language-groovy" data-ext="groovy"><pre class="language-groovy"><code><span class="token keyword">import</span> com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>database<span class="token punctuation">.</span>model<span class="token punctuation">.</span>DasTable
<span class="token keyword">import</span> com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>database<span class="token punctuation">.</span>model<span class="token punctuation">.</span>ObjectKind
<span class="token keyword">import</span> com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>database<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Case
<span class="token keyword">import</span> com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>database<span class="token punctuation">.</span>util<span class="token punctuation">.</span>DasUtil

<span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>SimpleDateFormat

<span class="token comment">/*
 * Available context bindings:
 *   SELECTION   Iterable&lt;DasObject&gt;
 *   PROJECT     project
 *   FILES       files helper
 */</span>
packageName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
typeMapping <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/(?i)tinyint|smallint|mediumint/</span></span><span class="token punctuation">)</span>      <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;Integer&quot;</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/(?i)int/</span></span><span class="token punctuation">)</span>                             <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;Long&quot;</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/(?i)bool|bit/</span></span><span class="token punctuation">)</span>                        <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;Boolean&quot;</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/(?i)float|double|decimal|real/</span></span><span class="token punctuation">)</span>       <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;BigDecimal&quot;</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/(?i)datetime|timestamp|date|time/</span></span><span class="token punctuation">)</span>    <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;Date&quot;</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/(?i)blob|binary|bfile|clob|raw|image/</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;InputStream&quot;</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/(?i)/</span></span><span class="token punctuation">)</span>                                <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;String&quot;</span></span>
<span class="token punctuation">]</span>


FILES<span class="token punctuation">.</span><span class="token function">chooseDirectoryAndSave</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;Choose directory&quot;</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;Choose where to store generated files&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> dir <span class="token operator">-&gt;</span>
  SELECTION<span class="token punctuation">.</span>filter <span class="token punctuation">{</span> it <span class="token keyword">instanceof</span> <span class="token class-name">DasTable</span> <span class="token operator">&amp;&amp;</span> it<span class="token punctuation">.</span><span class="token function">getKind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ObjectKind<span class="token punctuation">.</span>TABLE <span class="token punctuation">}</span><span class="token punctuation">.</span>each <span class="token punctuation">{</span> <span class="token function">generate</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> dir<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">generate</span><span class="token punctuation">(</span>table<span class="token punctuation">,</span> dir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">def</span> className <span class="token operator">=</span> <span class="token function">javaName</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">def</span> fields <span class="token operator">=</span> <span class="token function">calcFields</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span>
  packageName <span class="token operator">=</span> <span class="token function">getPackageName</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span>
  PrintWriter printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> className <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;.java&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;UTF-8&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  printWriter<span class="token punctuation">.</span>withPrintWriter <span class="token punctuation">{</span> out <span class="token operator">-&gt;</span> <span class="token function">generate</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> className<span class="token punctuation">,</span> fields<span class="token punctuation">,</span> table<span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token comment">//    new File(dir, className + &quot;.java&quot;).withPrintWriter { out -&gt; generate(out, className, fields,table) }</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取包所在文件夹路径</span>
<span class="token keyword">def</span> <span class="token function">getPackageName</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> dir<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;\\\\\\\\&quot;</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;/&quot;</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;^.*src(\\\\.main\\\\.java\\\\.)?&quot;</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;;&quot;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">generate</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> className<span class="token punctuation">,</span> fields<span class="token punctuation">,</span> table<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;package </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">packageName</span></span><span class="token string">&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import javax.persistence.Column;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import javax.persistence.Entity;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import javax.persistence.Table;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import javax.persistence.Id;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import javax.persistence.GeneratedValue;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import java.io.Serializable;&quot;</span></span>
  Set types <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  fields<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    types<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;Date&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import java.util.Date;&quot;</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;BigDecimal&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import java.math.BigDecimal;&quot;</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;InputStream&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;import java.io.InputStream;&quot;</span></span>
  <span class="token punctuation">}</span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;/**\\n&quot;</span></span> <span class="token operator">+</span>
          <span class="token interpolation-string"><span class="token string">&quot; * @Description  \\n&quot;</span></span> <span class="token operator">+</span>
          <span class="token interpolation-string"><span class="token string">&quot; * @Author  hanziqiang\\n&quot;</span></span> <span class="token operator">+</span> <span class="token comment">//1. 修改idea为自己名字</span>
          <span class="token interpolation-string"><span class="token string">&quot; * @Date &quot;</span></span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot; \\n&quot;</span></span> <span class="token operator">+</span>
          <span class="token interpolation-string"><span class="token string">&quot; */&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;@Entity&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;@Table ( name =\\&quot;&quot;</span></span> <span class="token operator">+</span> table<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;\\&quot; )&quot;</span></span> <span class="token comment">//2. schema = \\&quot;后面添加自己的表空间名称(mysql可以不添加, 不用这个schema属性也行)</span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;public class </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">className</span></span><span class="token string">  implements Serializable {&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token function">genSerialID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fields<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
    <span class="token comment">// 输出注释</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>commoent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t/**&quot;</span></span>
      out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t * </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>commoent<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
      out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t */&quot;</span></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>annos<span class="token operator">+</span><span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;[@Id]&quot;</span></span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t@Id&quot;</span></span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span>annos <span class="token operator">!=</span> <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span> out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;   \${it.annos.replace(&quot;</span></span><span class="token punctuation">[</span><span class="token annotation punctuation">@Id</span><span class="token punctuation">]</span><span class="token interpolation-string"><span class="token string">&quot;, &quot;</span></span><span class="token interpolation-string"><span class="token string">&quot;)}&quot;</span></span>


    <span class="token comment">// 输出成员变量</span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\tprivate </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;&quot;</span></span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 输出get/set方法</span>
  fields<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\tpublic </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> get</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">() {&quot;</span></span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t\\treturn this.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;&quot;</span></span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t}&quot;</span></span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>

    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\tpublic void set</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) {&quot;</span></span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t\\tthis.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;&quot;</span></span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t}&quot;</span></span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 输出toString方法</span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t@Override&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\tpublic String toString() {&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t\\treturn \\&quot;{\\&quot; +&quot;</span></span>
  fields<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t\\t\\t\\t\\t\\&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=&#39;\\&quot; + </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">it<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> + &#39;\\\\&#39;&#39; +&quot;</span></span>
  <span class="token punctuation">}</span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t\\t\\t\\t&#39;}&#39;;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;\\t}&quot;</span></span>

  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span>
  out<span class="token punctuation">.</span>println <span class="token interpolation-string"><span class="token string">&quot;}&quot;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">calcFields</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  DasUtil<span class="token punctuation">.</span><span class="token function">getColumns</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> fields<span class="token punctuation">,</span> col <span class="token operator">-&gt;</span>
    <span class="token keyword">def</span> spec <span class="token operator">=</span> Case<span class="token punctuation">.</span>LOWER<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>col<span class="token punctuation">.</span><span class="token function">getDataType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSpecification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> typeStr <span class="token operator">=</span> typeMapping<span class="token punctuation">.</span>find <span class="token punctuation">{</span> p<span class="token punctuation">,</span> t <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>value
    <span class="token keyword">def</span> comm <span class="token operator">=</span> <span class="token punctuation">[</span>
            colName <span class="token punctuation">:</span> col<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            name    <span class="token punctuation">:</span> <span class="token function">javaName</span><span class="token punctuation">(</span>col<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            type    <span class="token punctuation">:</span> typeStr<span class="token punctuation">,</span>
            commoent<span class="token punctuation">:</span> col<span class="token punctuation">.</span><span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            annos   <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;\\t@Column(name = \\&quot;&quot;</span></span> <span class="token operator">+</span> col<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;\\&quot; )&quot;</span></span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;id&quot;</span></span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>Case<span class="token punctuation">.</span>LOWER<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>col<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      comm<span class="token punctuation">.</span>annos <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">&quot;@Id&quot;</span></span><span class="token punctuation">]</span>
    fields <span class="token operator">+=</span> <span class="token punctuation">[</span>comm<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这里是处理数据库表前缀的方法，这里处理的是t_xxx命名的表</span>
<span class="token comment">// 已经修改为使用javaName, 如果有需要可以在def className = javaName(table.getName(), true)中修改为javaClassName</span>
<span class="token comment">// 处理类名（这里是因为我的表都是以t_命名的，所以需要处理去掉生成类名时的开头的T，</span>
<span class="token comment">// 如果你不需要去掉表的前缀，那么请查找用到了 javaClassName这个方法的地方修改为 javaName 即可）</span>
<span class="token keyword">def</span> <span class="token function">javaClassName</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> capitalize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">def</span> s <span class="token operator">=</span> com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>psi<span class="token punctuation">.</span>codeStyle<span class="token punctuation">.</span>NameUtil<span class="token punctuation">.</span><span class="token function">splitNameIntoWords</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
          <span class="token punctuation">.</span>collect <span class="token punctuation">{</span> Case<span class="token punctuation">.</span>LOWER<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">/[^\\p{javaJavaIdentifierPart}[_]]/</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;_&quot;</span></span><span class="token punctuation">)</span>
  <span class="token comment">// 去除开头的T  http://developer.51cto.com/art/200906/129168.htm</span>
  s <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
  capitalize <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> s <span class="token punctuation">:</span> Case<span class="token punctuation">.</span>LOWER<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">javaName</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> capitalize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//    def s = str.split(/(?&lt;=[^\\p{IsLetter}])/).collect { Case.LOWER.apply(it).capitalize() }</span>
<span class="token comment">//            .join(&quot;&quot;).replaceAll(/[^\\p{javaJavaIdentifierPart}]/, &quot;_&quot;)</span>
<span class="token comment">//    capitalize || s.length() == 1? s : Case.LOWER.apply(s[0]) + s[1..-1]</span>
  <span class="token keyword">def</span> s <span class="token operator">=</span> com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>psi<span class="token punctuation">.</span>codeStyle<span class="token punctuation">.</span>NameUtil<span class="token punctuation">.</span><span class="token function">splitNameIntoWords</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
          <span class="token punctuation">.</span>collect <span class="token punctuation">{</span> Case<span class="token punctuation">.</span>LOWER<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">/[^\\p{javaJavaIdentifierPart}[_]]/</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;_&quot;</span></span><span class="token punctuation">)</span>
  capitalize <span class="token operator">||</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> s <span class="token punctuation">:</span> Case<span class="token punctuation">.</span>LOWER<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">isNotEmpty</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> content <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> content<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> String <span class="token function">changeStyle</span><span class="token punctuation">(</span>String str<span class="token punctuation">,</span> <span class="token keyword">boolean</span> toCamel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>str <span class="token operator">||</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> str

  <span class="token keyword">if</span> <span class="token punctuation">(</span>toCamel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    String r <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;_&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>collect <span class="token punctuation">{</span> cc <span class="token operator">-&gt;</span> Case<span class="token punctuation">.</span>LOWER<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>cc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">capitalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    str <span class="token operator">=</span> str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> str<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span>collect <span class="token punctuation">{</span> cc <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> cc<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&#39;_&#39;</span> <span class="token operator">+</span> cc<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> cc <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//生成序列化的serialVersionUID</span>
<span class="token keyword">static</span> String <span class="token function">genSerialID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token interpolation-string"><span class="token string">&quot;\\tprivate static final long serialVersionUID =  &quot;</span></span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;L;&quot;</span></span>
<span class="token punctuation">}</span>


</code></pre></div><h2 id="spring-data-jpa-自动生成" tabindex="-1"><a class="header-anchor" href="#spring-data-jpa-自动生成" aria-hidden="true">#</a> spring Data jpa 自动生成</h2>`,4),c=[o];function e(u,i){return s(),a("div",null,c)}const k=n(p,[["render",e],["__file","idea.html.vue"]]);export{k as default};
