import{_ as n,p as s,q as a,a1 as p}from"./framework-d81ad7e5.js";const t={},o=p(`<h3 id="天空盒子" tabindex="-1"><a class="header-anchor" href="#天空盒子" aria-hidden="true">#</a> 天空盒子</h3><ul><li>主要是用到SkyBox类</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">skyBox</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SkyBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">positiveX</span><span class="token operator">:</span> <span class="token string">&quot;./texture/sky/px.jpg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">negativeX</span><span class="token operator">:</span> <span class="token string">&quot;./texture/sky/nx.jpg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">positiveY</span><span class="token operator">:</span> <span class="token string">&quot;./texture/sky/ny.jpg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">negativeY</span><span class="token operator">:</span> <span class="token string">&quot;./texture/sky/py.jpg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">positiveZ</span><span class="token operator">:</span> <span class="token string">&quot;./texture/sky/pz.jpg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">negativeZ</span><span class="token operator">:</span> <span class="token string">&quot;./texture/sky/nz.jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>地图加载</li></ul><ul><li>使用imageryProvider来加载地图</li></ul><h4 id="天地图" tabindex="-1"><a class="header-anchor" href="#天地图" aria-hidden="true">#</a> 天地图</h4><p>加载天地图影像地图</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">imageryProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>WebMapTileServiceImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://t0.tianditu.com/vec_w/wmts?service=wmts&amp;request=GetTile&amp;version=1.0.0&amp;LAYER=vec&amp;tileMatrixSet=w&amp;TileMatrix={TileMatrix}&amp;TileRow={TileRow}&amp;TileCol={TileCol}&amp;style=default&amp;format=tiles&amp;tk=申请的K值&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token string">&quot;tdtBasicLayer&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">tileMatrixSetID</span><span class="token operator">:</span> <span class="token string">&quot;GoogleMapsCompatible&quot;</span><span class="token punctuation">,</span><span class="token comment">//使用谷歌的瓦片切片方式</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>还可以继续加载地图（或地图注记），实现地图的叠加展示，使用<code>viewer.imageryLayers.addImageryProvider</code>。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//地图叠加：下面这个图层是 放在上层的图层</span>
  <span class="token keyword">var</span> imageryLayers <span class="token operator">=</span> viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">;</span>
  <span class="token keyword">var</span> layer <span class="token operator">=</span> imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>UrlTemplateImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&amp;size=1&amp;scale=1&amp;style=8&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token string">&quot;tdtVecBasicLayer&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tileMatrixSetID</span><span class="token operator">:</span> <span class="token string">&quot;GoogleMapsCompatible&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>后加入的地图默认会覆盖前面的地图。 4.2高德地图</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">imageryProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>UrlTemplateImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&amp;size=1&amp;scale=1&amp;style=8&amp;x={x}&amp;y={y}&amp;z={z}&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">layer</span><span class="token operator">:</span> <span class="token string">&quot;tdtVecBasicLayer&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tileMatrixSetID</span><span class="token operator">:</span> <span class="token string">&quot;GoogleMapsCompatible&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>4.3 OSM 这里用的是Cesium.OpenStreetMapImageryProvider</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
 <span class="token comment">// OSM地图,</span>
     <span class="token literal-property property">imageryProvider</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>OpenStreetMapImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://a.tile.openstreetmap.org/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="地形的加载" tabindex="-1"><a class="header-anchor" href="#地形的加载" aria-hidden="true">#</a> 地形的加载</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
<span class="token comment">// 设置地形</span>
  <span class="token literal-property property">terrainProvider</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span><span class="token function">createWorldTerrain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="本地加载地形" tabindex="-1"><a class="header-anchor" href="#本地加载地形" aria-hidden="true">#</a> 本地加载地形</h4><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&quot;cesiumContainer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>

<span class="token comment">//加载自己准备的数据</span>
    <span class="token literal-property property">terrainProvider</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span><span class="token function">createWorldTerrain</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;./terrains/gz&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre></div><h3 id="坐标系与转换" tabindex="-1"><a class="header-anchor" href="#坐标系与转换" aria-hidden="true">#</a> 坐标系与转换</h3><ul><li>cesium中常见的坐标系有这些</li></ul><ol><li><p>WGS-84地理坐标系</p></li><li><p>屏幕坐标系（笛卡尔平面直角坐标）</p></li><li><p>笛卡尔空间直角坐标系</p></li></ol><h4 id="wgs-84地理坐标系" tabindex="-1"><a class="header-anchor" href="#wgs-84地理坐标系" aria-hidden="true">#</a> WGS-84地理坐标系</h4><p>通过<code>new Cesium.Cartographic（longitude，latitude，height）</code>来创建，三个参数分别代表经度，纬度，高度</p><h3 id="屏幕坐标系-笛卡尔平面直角坐标" tabindex="-1"><a class="header-anchor" href="#屏幕坐标系-笛卡尔平面直角坐标" aria-hidden="true">#</a> 屏幕坐标系（笛卡尔平面直角坐标）</h3><p>屏幕坐标系即二维笛卡尔坐标系，Cesium中使用Cartesian2来描述，<strong>屏幕左上角为原点<code>（0,0）</code></strong>，单位为像素值，屏幕水平方向为X轴，向右为正，垂直方向为Y轴，向下为正。</p><ul><li>通过<code>new Cesium.Cartesian2 (x，y）</code>创建对象，其中的<code>(x，y）</code>代表平面坐标系中的坐标</li></ul><h4 id="笛卡尔空间直角坐标系-世界坐标系" tabindex="-1"><a class="header-anchor" href="#笛卡尔空间直角坐标系-世界坐标系" aria-hidden="true">#</a> 笛卡尔空间直角坐标系（世界坐标系）</h4><ul><li><code>（Cartesian3）</code>。笛卡尔空间直角坐标系的原点就是椭球体的中心点。由于我们在计算机上绘图时不方便参照经纬度直接进行绘制，所以通常会先将坐标系转换为笛卡尔空间直角坐标系，再进行绘制。</li></ul><ul><li>笛卡尔空间直角坐标系的3个分量<code>x、y、z</code>，可</li></ul><ul><li>以被看作以椭球体中心点为原点的空间直角坐标系中的某一个点的坐标。</li></ul><blockquote><p>在Cesium中，使用<code>Cartesian3</code>类，通过<code>new Cesium.Cartesian3 (x，y，z）</code>创建对象,其中的<code>(x，y，z）</code>代表笛卡尔空间直角坐标系中的坐标。</p></blockquote><h3 id="坐标转换" tabindex="-1"><a class="header-anchor" href="#坐标转换" aria-hidden="true">#</a> 坐标转换</h3><ol><li>角度与弧度的转换 WGS84坐标的经纬度有弧度、角度两种形式，可以使用cesium提供的数学方法进行转换，弧度转角度，角度转弧度。</li></ol><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code> <span class="token comment">// 角度转为弧度</span>
  <span class="token keyword">var</span> radians <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>radians<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 弧度转角度</span>
  <span class="token keyword">var</span> degrees <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toDegrees</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>degrees<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当然，经纬度转弧度也可以用<code>Cesium.Cartographic.fromDegrees</code></p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//WGS84经纬度坐标 转 弧度坐标</span>
<span class="token keyword">var</span> radians <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>
    longitude<span class="token punctuation">,</span>
    latitude<span class="token punctuation">,</span>
    height
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>2.屏幕坐标转世界坐标（<code>Cartesian2转Cartesian3</code>） 首先要用如下代码，来实现鼠标点击获取屏幕坐标 创建变量handler,并实例化一个ScreenSpaceEventHandler对象，然后使用该对象的setInputAction方法设置要在输入事件上执行的功能。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ScreenSpaceEventHandler</span><span class="token punctuation">(</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
handler<span class="token punctuation">.</span><span class="token function">setInputAction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">movement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//屏幕坐标</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;屏幕坐标：&quot;</span><span class="token punctuation">,</span> movement<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token punctuation">,</span>Cesium<span class="token punctuation">.</span>ScreenSpaceEventType<span class="token punctuation">.</span><span class="token constant">LEFT_CLICK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>关于世界坐标，还有一些需要区分的地方，主要是三种情况，主要看这个点位是否考虑地形、模型、倾斜摄影等等。</p><h5 id="场景坐标-包括地形、倾斜摄影模型等的坐标" tabindex="-1"><a class="header-anchor" href="#场景坐标-包括地形、倾斜摄影模型等的坐标" aria-hidden="true">#</a> 场景坐标，包括地形、倾斜摄影模型等的坐标</h5><p>Cesium中的Camera提供了pickEllipsoid方法</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//屏幕坐标 转 世界坐标（场景坐标，包括地形、倾斜摄影模型等的坐标）</span>
 
<span class="token keyword">var</span> cartesian3 <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">pickPosition</span><span class="token punctuation">(</span>movement<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注意此处的屏幕坐标一定要在球上，否则结果为undefined</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;屏幕坐标转世界坐标（场景）：&quot;</span><span class="token punctuation">,</span> cartesian3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="地表坐标-包括地形但不包括模型、倾斜摄影等" tabindex="-1"><a class="header-anchor" href="#地表坐标-包括地形但不包括模型、倾斜摄影等" aria-hidden="true">#</a> 地表坐标，包括地形但不包括模型、倾斜摄影等</h5><p>通过相机与屏幕点位连线来求取坐标。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> ray <span class="token operator">=</span> viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">getPickRay</span><span class="token punctuation">(</span>movement<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cartesian3 <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span><span class="token function">pick</span><span class="token punctuation">(</span>ray<span class="token punctuation">,</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;屏幕坐标转世界坐标（地表）：&quot;</span><span class="token punctuation">,</span> cartesian3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="椭球面坐标-不包括地形、模型、倾斜摄影等" tabindex="-1"><a class="header-anchor" href="#椭球面坐标-不包括地形、模型、倾斜摄影等" aria-hidden="true">#</a> 椭球面坐标，不包括地形、模型、倾斜摄影等</h5><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> cartesian3 <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">pickEllipsoid</span><span class="token punctuation">(</span>
        movement<span class="token punctuation">.</span>position
<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;屏幕坐标转世界坐标（椭球面）：&quot;</span><span class="token punctuation">,</span> cartesian3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="世界坐标转屏幕坐标" tabindex="-1"><a class="header-anchor" href="#世界坐标转屏幕坐标" aria-hidden="true">#</a> 世界坐标转屏幕坐标</h4><p>可以通过<code>Cesium.SceneTransforms.wgs84ToWindowCoordinates</code>方法将世界坐标系转换为平面坐标系。该方法需要传入两个参数，分别为scene和position，其中<code>:scene</code>为当前场景，即<code>viewer. scene</code>; position为世界坐标系中的坐标。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//世界坐标 转 屏幕坐标</span>
<span class="token keyword">var</span> cartesian2 <span class="token operator">=</span>
    Cesium<span class="token punctuation">.</span>SceneTransforms<span class="token punctuation">.</span><span class="token function">wgs84ToWindowCoordinates</span><span class="token punctuation">(</span>
            viewer<span class="token punctuation">.</span>scene<span class="token punctuation">,</span>
            cartesian3
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;世界坐标转屏幕坐标：&quot;</span><span class="token punctuation">,</span> cartesian2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>4.世界坐标转WGS84</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//世界坐标 转 WGS84坐标，结果为弧度形式</span>
<span class="token keyword">var</span> cartographic <span class="token operator">=</span>
        Cesium<span class="token punctuation">.</span>Cartographic<span class="token punctuation">.</span><span class="token function">fromCartesian</span><span class="token punctuation">(</span>cartesian3<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;世界坐标转WGS84弧度坐标：&quot;</span><span class="token punctuation">,</span> cartographic<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>5.WGS坐标转世界坐标</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//WGS84经纬度坐标 转 世界坐标</span>
<span class="token keyword">var</span> position <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>
        longitude<span class="token punctuation">,</span>
        latitude<span class="token punctuation">,</span>
        height
<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;WGS84经纬度转世界坐标&quot;</span><span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//WGS84弧度坐标 转 世界坐标</span>
<span class="token keyword">var</span> position2 <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromRadians</span><span class="token punctuation">(</span>
        cartographic<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span>
        cartographic<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span>
        cartographic<span class="token punctuation">.</span>height
<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;WGS84弧度转世界坐标&quot;</span><span class="token punctuation">,</span> position2
</code></pre></div><h3 id="相机" tabindex="-1"><a class="header-anchor" href="#相机" aria-hidden="true">#</a> 相机</h3><h3 id="相机参数" tabindex="-1"><a class="header-anchor" href="#相机参数" aria-hidden="true">#</a> 相机参数</h3><p>如何设置相机？主要是借助于<code>viewer.camera.setView</code></p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>  <span class="token keyword">var</span> position <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">116.393428</span><span class="token punctuation">,</span> <span class="token number">39.90923</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">setView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 指定相机位置</span>
    <span class="token literal-property property">destination</span><span class="token operator">:</span> position<span class="token punctuation">,</span>
    <span class="token comment">// 指定相机视角</span>
    <span class="token literal-property property">orientation</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 指定相机的朝向,偏航角</span>
      <span class="token literal-property property">heading</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定相机的俯仰角,0度是竖直向上,-90度是向下</span>
      <span class="token literal-property property">pitch</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定相机的滚转角,翻滚角</span>
      <span class="token literal-property property">roll</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre></div><p><code>pitch、heading、row</code>三个参数表示相机的姿态，使用<code>position</code>表示相机位置。</p><ul><li><strong>heading</strong>：默认方向为正北，正角度为向东旋转，即水平旋转，也叫偏航角。</li><li><strong>pitch</strong>：默认角度为-90，即朝向地面，正角度在平面之上，负角度为平面下，即上下旋转，也叫俯仰角。</li><li><strong>roll</strong>：默认旋转角度为0，左右旋转，正角度向右，负角度向左，也叫翻滚角。</li></ul><ul><li>相机动画 可以让画面飞向指定的位置，并设置好相应的视角</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// flyto,让相机飞往某个地方</span>
  viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">flyTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">destination</span><span class="token operator">:</span> position<span class="token punctuation">,</span>
    <span class="token literal-property property">orientation</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">heading</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pitch</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">roll</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="键盘操控相机" tabindex="-1"><a class="header-anchor" href="#键盘操控相机" aria-hidden="true">#</a> 键盘操控相机</h3><p>我们可以给键盘绑定一个监听函数，来控制相机的移动、旋转。这里主要用到的就是相机身上自带的一系列方法 通过按键移动相机</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>	document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// console.log(e);</span>
		<span class="token comment">// 获取相机离地面的高度</span>
		<span class="token keyword">var</span> height <span class="token operator">=</span> viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>positionCartographic<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
		<span class="token keyword">var</span> moveRate <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向前移动</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">moveForward</span><span class="token punctuation">(</span>moveRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向后移动</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">moveBackward</span><span class="token punctuation">(</span>moveRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向左移动</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">moveLeft</span><span class="token punctuation">(</span>moveRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向右移动</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">moveRight</span><span class="token punctuation">(</span>moveRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向左旋转相机</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">lookLeft</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向右旋转相机</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">lookRight</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向上旋转相机</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">lookUp</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 设置相机向下旋转相机</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">lookDown</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 向左逆时针翻滚</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">twistLeft</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token string">&quot;h&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 向右顺时针翻滚</span>
			viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">twistRight</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="添加物体" tabindex="-1"><a class="header-anchor" href="#添加物体" aria-hidden="true">#</a> 添加物体</h3><h4 id="entity和primitive" tabindex="-1"><a class="header-anchor" href="#entity和primitive" aria-hidden="true">#</a> entity和Primitive</h4><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 添加文字标签和广告牌</span>
  <span class="token keyword">var</span> label <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">113.3191</span><span class="token punctuation">,</span> <span class="token number">23.109</span><span class="token punctuation">,</span> <span class="token number">750</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;广州塔&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">font</span><span class="token operator">:</span> <span class="token string">&quot;24px sans-serif&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">fillColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">,</span>
      <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">,</span>
      <span class="token literal-property property">outlineWidth</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token comment">// FILL填充文字，OUTLINE勾勒标签，FILL_AND_OUTLINE填充文字和勾勒标签</span>
      <span class="token literal-property property">style</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>LabelStyle<span class="token punctuation">.</span><span class="token constant">FILL_AND_OUTLINE</span><span class="token punctuation">,</span>
      <span class="token comment">// 设置文字的偏移量</span>
      <span class="token literal-property property">pixelOffset</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 设置文字的显示位置,LEFT /RIGHT /CENTER</span>
      <span class="token literal-property property">horizontalOrigin</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>HorizontalOrigin<span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">,</span>
      <span class="token comment">// 设置文字的显示位置</span>
      <span class="token literal-property property">verticalOrigin</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>VerticalOrigin<span class="token punctuation">.</span><span class="token constant">BOTTOM</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">billboard</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token string">&quot;./texture/gzt.png&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      <span class="token comment">// 设置广告牌的显示位置</span>
      <span class="token literal-property property">verticalOrigin</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>VerticalOrigin<span class="token punctuation">.</span><span class="token constant">TOP</span><span class="token punctuation">,</span>
      <span class="token comment">// 设置广告牌的显示位置</span>
      <span class="token literal-property property">horizontalOrigin</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>HorizontalOrigin<span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="添加飞机模型" tabindex="-1"><a class="header-anchor" href="#添加飞机模型" aria-hidden="true">#</a> 添加飞机模型</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 添加3D模型</span>
<span class="token keyword">const</span> airplane <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Airplane&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token number">113.3191</span><span class="token punctuation">,</span> <span class="token number">23.109</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">model</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">uri</span><span class="token operator">:</span> <span class="token string">&quot;./model/Air.glb&quot;</span><span class="token punctuation">,</span>
            <span class="token comment">// 设置飞机的最小像素</span>
            <span class="token literal-property property">minimumPixelSize</span><span class="token operator">:</span> <span class="token number">128</span><span class="token punctuation">,</span>
            <span class="token comment">// 设置飞机的轮廓</span>
            <span class="token literal-property property">silhouetteSize</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            <span class="token comment">// 设置轮廓的颜色</span>
            <span class="token literal-property property">silhouetteColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">,</span>
            <span class="token comment">// 设置相机距离模型多远的距离显示</span>
            <span class="token literal-property property">distanceDisplayCondition</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>DistanceDisplayCondition</span><span class="token punctuation">(</span>
                    <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token number">200000</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="添加一个矩形" tabindex="-1"><a class="header-anchor" href="#添加一个矩形" aria-hidden="true">#</a> 添加一个矩形</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>  <span class="token comment">// 使用entity创建矩形</span>
  <span class="token keyword">var</span> rectangle <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rectangle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">coordinates</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Rectangle<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>
        <span class="token comment">// 西边的经度</span>
        <span class="token number">90</span><span class="token punctuation">,</span>
        <span class="token comment">// 南边维度</span>
        <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token comment">// 东边经度</span>
        <span class="token number">110</span><span class="token punctuation">,</span>
        <span class="token comment">// 北边维度</span>
        <span class="token number">30</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">material</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">.</span><span class="token function">withAlpha</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="primitive绘制图形" tabindex="-1"><a class="header-anchor" href="#primitive绘制图形" aria-hidden="true">#</a> Primitive绘制图形</h2><p>Primitive绘制的图形由两部分组成:</p><h4 id="第一部分为几何形状-geometry-用于定义primitive图形的绐构-如面、椭圆、线条等" tabindex="-1"><a class="header-anchor" href="#第一部分为几何形状-geometry-用于定义primitive图形的绐构-如面、椭圆、线条等" aria-hidden="true">#</a> 第一部分为几何形状(Geometry) ，用于定义Primitive图形的绐构，如面、椭圆、线条等;</h4><h4 id="第二部分为外观-appearance-主要用于定义primitive图形的渲染着色-通俗来讲-就是定义primitive图形的外观材质。" tabindex="-1"><a class="header-anchor" href="#第二部分为外观-appearance-主要用于定义primitive图形的渲染着色-通俗来讲-就是定义primitive图形的外观材质。" aria-hidden="true">#</a> 第二部分为外观(Appearance)，主要用于定义Primitive图形的渲染着色，通俗来讲，就是定义Primitive图形的外观材质。</h4><ul><li><p>primitive主要由两部分组成：Geometry和Appearance。</p></li><li><p>Geometry主要定义了primitive的几何结构，而Appearance主要负责定义primitive的着色，包括GLSL顶点着色器、片段着色器和渲染状态。</p></li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//绘制线</span>
<span class="token comment">//定义几何形状</span>
<span class="token keyword">var</span> polyline <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>GeometryInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">geometry</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolylineGeometry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">positions</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegreesArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                    <span class="token number">108.0</span><span class="token punctuation">,</span> <span class="token number">31.0</span><span class="token punctuation">,</span>
                    <span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token number">36.0</span><span class="token punctuation">,</span>
                    <span class="token number">105.0</span><span class="token punctuation">,</span> <span class="token number">39.0</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">2.0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义外观</span>
<span class="token keyword">var</span> polylineAppearance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolylineMaterialAppearance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">material</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Material<span class="token punctuation">.</span><span class="token function">fromType</span><span class="token punctuation">(</span><span class="token string">&#39;Color&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//创建Primitive</span>
<span class="token keyword">var</span> addPolylineGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Primitive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">geometryInstances</span><span class="token operator">:</span> polyline<span class="token punctuation">,</span>
        <span class="token literal-property property">appearance</span><span class="token operator">:</span> polylineAppearance
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//添加primitive到场景中</span>
viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addPolylineGeometry<span class="token punctuation">)</span>
 


 <span class="token comment">// 自定义color</span>
 <span class="token comment">//给color添加配置项</span>
<span class="token keyword">var</span> polylineAppearance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolylineMaterialAppearance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">material</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Material<span class="token punctuation">.</span><span class="token function">fromType</span><span class="token punctuation">(</span><span class="token string">&quot;Color&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre></div><ul><li>绘制一个四边形</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//绘制面</span>
<span class="token comment">//定义几何形状</span>
<span class="token keyword">var</span> polygon <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>GeometryInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">geometry</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonGeometry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">polygonHierarchy</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonHierarchy</span><span class="token punctuation">(</span>
                        Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegreesArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                                <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">109</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span>
                        <span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义外观</span>
<span class="token keyword">var</span> polygonAppearance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>MaterialAppearance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">material</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Material<span class="token punctuation">.</span><span class="token function">fromType</span><span class="token punctuation">(</span><span class="token string">&quot;Dot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建Primitive</span>
<span class="token keyword">var</span> addPolygonGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Primitive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">geometryInstances</span><span class="token operator">:</span> polygon<span class="token punctuation">,</span>
        <span class="token literal-property property">appearance</span><span class="token operator">:</span> polygonAppearance<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre></div><table><thead><tr><th>几何图形</th><th>说明</th></tr></thead><tbody><tr><td>BoxGeometry</td><td>立方体</td></tr><tr><td>BoxOutlineGeometry</td><td>仅有轮廓的立方体，只有外部线条的的盒子</td></tr><tr><td>CircleGeometry</td><td>圆形或者拉伸的圆形，圆圈或挤压圆</td></tr><tr><td>CircleOutlineGeometry</td><td>只有轮廓的圆形</td></tr><tr><td>CorridorGeometry</td><td>走廊：沿着地表的多段线(垂直于表面的折线)，且具有一定的宽度，可以拉伸到一定的高度</td></tr><tr><td>CorridorOutlineGeometry</td><td>只有轮廓的走廊</td></tr><tr><td>CylinderGeometry</td><td>圆柱、圆锥或者截断的圆锥</td></tr><tr><td>CylinderOutlineGeometry</td><td>只有轮廓的圆柱、圆锥或者截断的圆锥</td></tr><tr><td>EllipseGeometry</td><td>椭圆或者拉伸的椭圆</td></tr><tr><td>EllipseOutlineGeometry</td><td>只有轮廓的椭圆或者拉伸的椭圆</td></tr><tr><td>EllipsoidGeometry</td><td>椭球体</td></tr><tr><td>EllipsoidOutlineGeometry</td><td>只有轮廓的椭球体</td></tr><tr><td>RectangleGeometry</td><td>矩形或者拉伸的矩形</td></tr><tr><td>RectangleOutlineGeometry</td><td>只有轮廓的矩形或者拉伸的矩形</td></tr><tr><td>PolygonGeometry</td><td>多边形，可以具有空洞或者拉伸一定的高度</td></tr><tr><td>PolygonOutlineGeometry</td><td>只有轮廓的多边形</td></tr><tr><td>PolylineGeometry</td><td>多段线，可以具有一定的宽度</td></tr><tr><td>SimplePolylineGeometry</td><td>简单的多段线</td></tr><tr><td>PolylineVolumeGeometry</td><td>多段线柱体</td></tr><tr><td>PolylineVolumeOutlineGeometry</td><td>只有轮廓的多段线柱体</td></tr><tr><td>SphereGeometry</td><td>球体</td></tr><tr><td>SphereOutlineGeometry</td><td>只有轮廓的球体</td></tr><tr><td>WallGeometry</td><td>墙</td></tr><tr><td>WallOutlineGeometry</td><td>只有轮廓的墙</td></tr></tbody></table><ul><li>经纬度组合</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code> <span class="token keyword">if</span> <span class="token punctuation">(</span>cesiumContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span>cesiumContainer<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">timeline</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 时间轴</span>
          <span class="token literal-property property">animation</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 动画控件</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//  primitive   entity</span>
        <span class="token comment">//  entity 基于 primitive 封装的， </span>
        <span class="token comment">// primitive  可以绘制更高级的图形，更接近webgl 底层</span>

        <span class="token comment">// 2. Draw different instances each with a unique color</span>
        <span class="token keyword">const</span> rectangleInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>GeometryInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">geometry</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>RectangleGeometry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                  <span class="token comment">// 矩形   左下右上 定位 矩形   经度 维度</span>
            <span class="token literal-property property">rectangle</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Rectangle<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">140.0</span><span class="token punctuation">,</span> <span class="token number">30.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">vertexFormat</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>PerInstanceColorAppearance<span class="token punctuation">.</span><span class="token constant">VERTEX_FORMAT</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;rectangle&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorGeometryInstanceAttribute</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



        <span class="token keyword">const</span> polygonWithHole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonGeometry</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">polygonHierarchy</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PolygonHierarchy</span><span class="token punctuation">(</span>
            Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegreesArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
              <span class="token operator">-</span><span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token number">45.0</span><span class="token punctuation">,</span>
              <span class="token operator">-</span><span class="token number">80.0</span><span class="token punctuation">,</span> <span class="token number">35.0</span><span class="token punctuation">,</span>
              <span class="token operator">-</span><span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token number">25.0</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">const</span> polyLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>GeometryInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">geometry</span><span class="token operator">:</span> polygonWithHole<span class="token punctuation">,</span>
          <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorGeometryInstanceAttribute</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Primitive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">geometryInstances</span><span class="token operator">:</span> <span class="token punctuation">[</span>rectangleInstance<span class="token punctuation">,</span> polyLine<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">appearance</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>PerInstanceColorAppearance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token punctuation">}</span>
</code></pre></div><h3 id="加载3dtile" tabindex="-1"><a class="header-anchor" href="#加载3dtile" aria-hidden="true">#</a> 加载3DTile</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>        <span class="token keyword">const</span> tileset <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>primitives<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
          <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cesium3DTileset</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>IonResource<span class="token punctuation">.</span><span class="token function">fromAssetId</span><span class="token punctuation">(</span><span class="token number">75343</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        viewer<span class="token punctuation">.</span><span class="token function">flyTo</span><span class="token punctuation">(</span>tileset<span class="token punctuation">)</span>



</code></pre></div><h3 id="加载瓦片" tabindex="-1"><a class="header-anchor" href="#加载瓦片" aria-hidden="true">#</a> 加载瓦片</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//创建地图 </span>
    viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
              <span class="token literal-property property">animation</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//动画控制，默认true </span>
              <span class="token literal-property property">baseLayerPicker</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//地图切换控件(底图以及地形图)是否显示,默认显示true </span>
              <span class="token literal-property property">fullscreenButton</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//全屏按钮,默认显示true </span>
              <span class="token literal-property property">geocoder</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//地名查找,默认true </span>
              <span class="token literal-property property">timeline</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//时间线,默认true </span>
              <span class="token literal-property property">vrButton</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//双屏模式,默认不显示false </span>
              <span class="token literal-property property">homeButton</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//主页按钮，默认true </span>
              <span class="token literal-property property">infoBox</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//点击要素之后显示的信息,默认true </span>
              <span class="token literal-property property">selectionIndicator</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//选中元素显示,默认true </span>
              <span class="token literal-property property">navigationHelpButton</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//导航帮助说明,默认true </span>
              <span class="token literal-property property">navigationInstructionsInitiallyVisible</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> 
              <span class="token literal-property property">sceneModePicker</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//是否显示地图2D2.5D3D模式 </span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
    viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span>layerAdded<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">orderByZIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> 
 
    <span class="token punctuation">}</span><span class="token punctuation">)</span> 
    viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>debugShowFramesPerSecond <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
 <span class="token comment">//隐藏logo </span>
      <span class="token function">hideMapLogo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token doc-comment comment">/** 
      * 隐藏logo以及地图服务版权信息 
      * <span class="token keyword">@method</span> hideMapLogo 
      * <span class="token keyword">@param</span> 
      * <span class="token keyword">@return</span> 
      */</span> 
 <span class="token keyword">function</span> <span class="token function">hideMapLogo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
        viewer<span class="token punctuation">.</span>_cesiumWidget<span class="token punctuation">.</span>_creditContainer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span> 
      <span class="token punctuation">}</span> 
 
 <span class="token keyword">var</span> provinceLayer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
 
    Cesium<span class="token punctuation">.</span><span class="token function">loadText</span><span class="token punctuation">(</span><span class="token string">&quot;./Assets/Data/json/bj.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">geojson</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        geojson <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> geojson <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token keyword">var</span> turf <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>turf<span class="token punctuation">;</span> 
 <span class="token keyword">var</span> mask <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
 
 <span class="token keyword">try</span> <span class="token punctuation">{</span> 
 <span class="token comment">//缓冲区 </span>
 <span class="token keyword">var</span> bufferedOuter <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span>geojson<span class="token punctuation">.</span>features<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;kilometers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
 <span class="token keyword">var</span> bufferedInner <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span>geojson<span class="token punctuation">.</span>features<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;kilometers&quot;</span><span class="token punctuation">)</span> 
            bufferedInner <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>bufferedInner<span class="token punctuation">,</span> geojson<span class="token punctuation">.</span>features<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
            bufferedOuter <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>bufferedOuter<span class="token punctuation">,</span> bufferedInner<span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
            bufferedInner <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">featureCollection</span><span class="token punctuation">(</span><span class="token punctuation">[</span>bufferedInner<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            bufferedOuter <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">featureCollection</span><span class="token punctuation">(</span><span class="token punctuation">[</span>bufferedOuter<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
 <span class="token keyword">var</span> bufferedOuterProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VectorTileImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
                <span class="token literal-property property">source</span><span class="token operator">:</span> bufferedOuter<span class="token punctuation">,</span> 
                <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">removeDuplicate</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">defaultStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                    <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(209,204,226,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">lineWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(209,204,226,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">tileCacheSize</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showMaker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showCenterLabel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetX</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetY</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;黑体&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">centerLabelPropertyName</span><span class="token operator">:</span> <span class="token string">&quot;NAME&quot;</span> 
                <span class="token punctuation">}</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">maximumLevel</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">simplify</span><span class="token operator">:</span> <span class="token boolean">false</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token keyword">var</span> bufferedOuterLayer<span class="token punctuation">;</span> 
            bufferedOuterProvider<span class="token punctuation">.</span>readyPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                bufferedOuterLayer <span class="token operator">=</span> viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>bufferedOuterProvider<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
 <span class="token keyword">var</span> bufferedInnerProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VectorTileImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
                <span class="token literal-property property">source</span><span class="token operator">:</span> bufferedInner<span class="token punctuation">,</span> 
                <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">removeDuplicate</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">defaultStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                    <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(185,169,199,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">lineWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(185,169,199,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">tileCacheSize</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showMaker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showCenterLabel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetX</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetY</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;黑体&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">centerLabelPropertyName</span><span class="token operator">:</span> <span class="token string">&quot;NAME&quot;</span> 
                <span class="token punctuation">}</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">maximumLevel</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">simplify</span><span class="token operator">:</span> <span class="token boolean">false</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token keyword">var</span> bufferedInnerLayer<span class="token punctuation">;</span> 
            bufferedInnerProvider<span class="token punctuation">.</span>readyPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                bufferedInnerLayer <span class="token operator">=</span> viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>bufferedInnerProvider<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
 
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> 
 
 
        Cesium<span class="token punctuation">.</span><span class="token function">loadText</span><span class="token punctuation">(</span><span class="token string">&quot;./Assets/Data/json/bjsx.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">bjsx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            bjsx <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> bjsx <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
            turf<span class="token punctuation">.</span><span class="token function">featureEach</span><span class="token punctuation">(</span>bjsx<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">feature<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token keyword">var</span> name <span class="token operator">=</span> feature<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token constant">NAME</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> 
 <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token string">&quot;海淀区&quot;</span> <span class="token operator">||</span> name <span class="token operator">==</span> <span class="token string">&quot;门头沟区&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//挖孔 </span>
                    mask <span class="token operator">=</span> feature<span class="token punctuation">;</span> 
 <span class="token keyword">if</span> <span class="token punctuation">(</span>mask<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                        geojson <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>geojson<span class="token punctuation">.</span>features<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                        geojson <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">featureCollection</span><span class="token punctuation">(</span><span class="token punctuation">[</span>geojson<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token punctuation">}</span> 
                <span class="token punctuation">}</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span> 
 
 <span class="token keyword">var</span> provinceProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VectorTileImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
                <span class="token literal-property property">source</span><span class="token operator">:</span> geojson<span class="token punctuation">,</span> 
                <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">removeDuplicate</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">defaultStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                    <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> <span class="token string">&quot;rgb(255,255,255)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">lineWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">tileCacheSize</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showMaker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showCenterLabel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetX</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetY</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;黑体&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">centerLabelPropertyName</span><span class="token operator">:</span> <span class="token string">&quot;NAME&quot;</span> 
                <span class="token punctuation">}</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">maximumLevel</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">simplify</span><span class="token operator">:</span> <span class="token boolean">false</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            provinceProvider<span class="token punctuation">.</span>readyPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                provinceLayer <span class="token operator">=</span> viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>provinceProvider<span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
 <span class="token comment">//添加区县 </span>
            viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VectorTileImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
                <span class="token literal-property property">source</span><span class="token operator">:</span> bjsx<span class="token punctuation">,</span> 
                <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">removeDuplicate</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">defaultStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                    <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> <span class="token string">&quot;rgb(255,255,255)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">lineWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">tileCacheSize</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showMaker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">showCenterLabel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,1)&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetX</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">labelOffsetY</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;黑体&quot;</span><span class="token punctuation">,</span> 
                    <span class="token literal-property property">centerLabelPropertyName</span><span class="token operator">:</span> <span class="token string">&quot;NAME&quot;</span> 
                <span class="token punctuation">}</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">maximumLevel</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">simplify</span><span class="token operator">:</span> <span class="token boolean">false</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
        <span class="token punctuation">}</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span> 
 
 <span class="token keyword">var</span> shpPromises2 <span class="token operator">=</span> <span class="token punctuation">[</span> 
        Cesium<span class="token punctuation">.</span><span class="token function">loadBlob</span><span class="token punctuation">(</span><span class="token string">&quot;Assets/Data/shp/world/国家简化边界.shp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        Cesium<span class="token punctuation">.</span><span class="token function">loadBlob</span><span class="token punctuation">(</span><span class="token string">&quot;Assets/Data/shp/world/国家简化边界.dbf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        Cesium<span class="token punctuation">.</span><span class="token function">loadBlob</span><span class="token punctuation">(</span><span class="token string">&quot;Assets/Data/shp/world/国家简化边界.prj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">]</span><span class="token punctuation">;</span> 
    Cesium<span class="token punctuation">.</span>when<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>shpPromises2<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;国家简化边界.shp&quot;</span><span class="token punctuation">;</span> 
        files<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;国家简化边界.dbf&quot;</span><span class="token punctuation">;</span> 
        files<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;国家简化边界.prj&quot;</span><span class="token punctuation">;</span> 
 
 <span class="token keyword">var</span> shpLayer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
 <span class="token keyword">var</span> shpProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VectorTileImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
            <span class="token literal-property property">source</span><span class="token operator">:</span> files<span class="token punctuation">,</span> 
            <span class="token literal-property property">removeDuplicate</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">zIndex</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">defaultStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                <span class="token literal-property property">lineWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">tileCacheSize</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">showMaker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">showCenterLabel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fontColor</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">,</span> 
 
 <span class="token comment">// outlineColor: &#39;rgba(138,138,138,1)&#39;,//边界颜色 </span>
                <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> <span class="token string">&quot;rgb(255,255,0)&quot;</span><span class="token punctuation">,</span><span class="token comment">//边界颜色 </span>
 <span class="token comment">//fillColor: &#39;rgba(225,225,225,1)&#39;,//陆地颜色 </span>
                <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">&#39;rgba(255,255,0,0.1)&#39;</span><span class="token punctuation">,</span><span class="token comment">//陆地颜色 </span>
 <span class="token comment">//backgroundColor: &#39;rgba(89,129,188,1)&#39;,//海区颜色 </span>
                <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&#39;rgba(89,129,188,0)&#39;</span><span class="token punctuation">,</span><span class="token comment">//海区颜色 </span>
 
                <span class="token literal-property property">labelOffsetX</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">labelOffsetY</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;黑体&quot;</span><span class="token punctuation">,</span> 
 <span class="token comment">// lineDash: [2, 5, 2, 5], </span>
                <span class="token literal-property property">labelStroke</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">labelStrokeWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">labelStrokeColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,1)&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">centerLabelPropertyName</span><span class="token operator">:</span> <span class="token string">&quot;NAME&quot;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">maximumLevel</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">simplify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
            <span class="token function-variable function">styleFilter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">feature<span class="token punctuation">,</span> style<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> level</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token keyword">if</span> <span class="token punctuation">(</span>feature<span class="token punctuation">.</span>properties 
                    <span class="token operator">&amp;&amp;</span> feature<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token constant">NAME</span> 
                    <span class="token operator">&amp;&amp;</span> feature<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token constant">NAME</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;CHINA&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token comment">//style.fillColor = Cesium.Color.fromBytes(255, 255, 255, 255); </span>
                    style<span class="token punctuation">.</span>fillColor <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token function">fromBytes</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//中国区域填充颜色 </span>
 
                <span class="token punctuation">}</span> 
 <span class="token keyword">return</span> style<span class="token punctuation">;</span> 
            <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        shpProvider<span class="token punctuation">.</span>readyPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            shpLayer <span class="token operator">=</span> viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>shpProvider<span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token comment">// viewer.imageryLayers.raiseToTop(chinaLayer); </span>
 <span class="token comment">//viewer.imageryLayers.raiseToBottom(shpLayer); </span>
 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
 <span class="token keyword">var</span> shpPromises <span class="token operator">=</span> <span class="token punctuation">[</span> 
    Cesium<span class="token punctuation">.</span><span class="token function">loadBlob</span><span class="token punctuation">(</span><span class="token string">&quot;./Assets/Data/shp/china/国界线.shp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    Cesium<span class="token punctuation">.</span><span class="token function">loadBlob</span><span class="token punctuation">(</span><span class="token string">&quot;./Assets/Data/shp/china/国界线.dbf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    Cesium<span class="token punctuation">.</span><span class="token function">loadBlob</span><span class="token punctuation">(</span><span class="token string">&quot;./Assets/Data/shp/china/国界线.prj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">]</span><span class="token punctuation">;</span> 
 <span class="token keyword">var</span> chinaLayer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
    Cesium<span class="token punctuation">.</span>when<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>shpPromises<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;国界线.shp&quot;</span><span class="token punctuation">;</span> 
        files<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;国界线.dbf&quot;</span><span class="token punctuation">;</span> 
        files<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;国界线.prj&quot;</span><span class="token punctuation">;</span> 
 
 
 <span class="token keyword">var</span> shpProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VectorTileImageryProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
            <span class="token literal-property property">source</span><span class="token operator">:</span> files<span class="token punctuation">,</span> 
            <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">removeDuplicate</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">defaultStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> <span class="token string">&quot;rgb(255,0,0)&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,0.6)&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">lineWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">tileCacheSize</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">showMaker</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">showCenterLabel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,1)&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">labelOffsetX</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">labelOffsetY</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;黑体&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">centerLabelPropertyName</span><span class="token operator">:</span> <span class="token string">&quot;NAME&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">lineCap</span><span class="token operator">:</span> <span class="token string">&quot;round&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">shadowColor</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">shadowOffsetX</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">shadowOffsetY</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">shadowBlur</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">lineJoin</span><span class="token operator">:</span> <span class="token string">&quot;round&quot;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">maximumLevel</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">minimumLevel</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
            <span class="token literal-property property">simplify</span><span class="token operator">:</span> <span class="token boolean">false</span> 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        shpProvider<span class="token punctuation">.</span>readyPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            chinaLayer <span class="token operator">=</span> viewer<span class="token punctuation">.</span>imageryLayers<span class="token punctuation">.</span><span class="token function">addImageryProvider</span><span class="token punctuation">(</span>shpProvider<span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
            viewer<span class="token punctuation">.</span><span class="token function">flyTo</span><span class="token punctuation">(</span>chinaLayer<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            Cesium<span class="token punctuation">.</span>Camera<span class="token punctuation">.</span><span class="token constant">DEFAULT_VIEW_RECTANGLE</span> <span class="token operator">=</span> shpProvider<span class="token punctuation">.</span>rectangle<span class="token punctuation">;</span> 
 
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="cesium加载本地服务" tabindex="-1"><a class="header-anchor" href="#cesium加载本地服务" aria-hidden="true">#</a> Cesium加载本地服务：</h3><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> myTerrainProvider<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CesiumTerrainProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8080/terrain&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">terrainProvider</span><span class="token operator">:</span> myTerrainProvider<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div>`,89),e=[o];function c(l,r){return s(),a("div",null,e)}const i=n(t,[["render",c],["__file","skybox.html.vue"]]);export{i as default};
